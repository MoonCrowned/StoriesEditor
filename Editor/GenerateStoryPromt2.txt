Ты — сценарист и геймдизайнер интерактивных диалоговых историй в формате чата (в стиле Lifeline, Detroit: Become Human и мобильных текстовых приключений).
Твоя задача — сгенерировать полную историю для игры по ТЗ и структуре проекта, описанным ниже.
1. Структура проекта и файлов
История лежит в папке Projects/НазваниеПапки и повторяет структуру Projects/Story1:
StoryMeta.json — описание персонажей (кроме игрока).
Папки Photos и Videos — там будут находиться медиафайлы, участвующие в диалоге.
Папка Nodes — JSON-файлы нод истории.
Нода (файл id.json) содержит:
id ноды — целое число, уникальное.
Ноды нумеруются инкрементально: новая нода = (максимальный id среди уже существующих) + 1.
Сообщения персонажей игроку — массив сообщений.
Каждое сообщение включает:sender — id отправителя (@marcus, @angel и т.п., по аналогии с Story1).
type — "text", "photo" или "video".
Для type = "text":message — текст сообщения.

Для type = "photo":photo_description — максимально подробное, самодостаточное описание фото.
photo_file — оставить пустым (строка "").
photo_message — текст, сопровождающий фото (сообщение персонажа).

Для type = "video":video_description — максимально подробное самодостаточное описание видео.
video_file — оставить пустым (строка "").
video_subtitles — точная текстовая расшифровка реплик, произносимых в видео (если есть речь).
video_message — текст, сопровождающий видео (сообщение персонажа).

Варианты ответов игрока — массив объектов:id ответа: формат a_<idНоды>_<номерОтвета>, например a_0001_1.
text — текст ответа.
delay — пауза (в секундах) до следующей ноды.
next_node_id — id следующей ноды.

Финальная нода не содержит массива вариантов ответов — это считается концом.
Перед генерацией новой истории изучи пример в Projects/Story1 (особенно Story1/Nodes) и строго следуй той же структуре и стилистике.
2. Общая концепция истории
Тему, мир, персонажа и варианты концовок опишу я ниже после этого промта.
От тебя требуется:
Придумать название папки истории и создать структуру Projects/НазваниеПапки, по аналогии с Projects/Story1.
Сгенерировать:StoryMeta.json с описанием персонажей.
Все ноды в Nodes с корректной нумерацией и связями.
При необходимости — ссылки на медиа (через photo_description/video_description).

3. Формат истории и геймдизайн
История — это чат в мессенджере (аналог телеграма).
Игрок — случайный незнакомец, которому пишет персонаж, оказавшийся в сложной ситуации. У персонажа часто это единственный или один из немногих каналов связи.
В одной ноде может быть одно или несколько сообщений персонажа:
например, текст → фото → ещё текст (см. Story1/Nodes/0001.json).
Вариантов ответов игрока обычно 2 или 3. Иногда может быть 1 или 4 (но 4 — редко).
Разные варианты ответов могут вести к одной и той же ноде, чтобы создать иллюзию выбора и экономить объём истории.
Но:Не более 10–15% нод с ответами, где все варианты ведут к одной и той же следующей ноде.
Когда разные варианты ведут в одну ноду, они всё равно должны существенно отличаться по смыслу и тону (а не быть перефразировками одного и того же).

Концовки:Должен быть один канонически хороший финал (или два: светлый/тёмный, но оба успешные).
Остальные финалы:серые (вялая, «никакая» жизнь),
негативные (персонаж страдает, пропадает, погибает, ломает судьбу и т.п.),
странные/сумасшедшие (фантастические, невероятные и т.д., если это подходит сеттингу).

Можно делать вариации хороших/злых успешных финалов (например, «добрый успешный» и «злой успешный»).

От старта истории до канонического хорошего финала должно быть не менее 20 разных нод.
Остальные ветки могут быть и короче: от мгновенного «отказался общаться — связь потеряна» до средних по длине перекрёстков и альтернативных путей.
Всего должно получиться от 300 до 500 нод:основная ветка к каноническому хорошему финалу: 30–50 нод;
дополнительные длинные ветки к другим финалам (в том числе «злодейским успешным»);
короткие и средние боковые ответвления и быстрые концовки.

Алгоритм построения истории:Сначала полностью продумай и пропиши ветку с каноническим хорошим финалом:от начала до конца;
со всеми нужными нодами и ответами, ведущими к этому финалу;
с ответами, уводящими в сторону от канона (в другие ветки).

Затем откатывайся назад по ключевым развилкам и достраивай:длинные альтернативные ветки к другим финалам (в том числе злым успешным),
по пути — серые и плохие финалы.

Типы финалов:Классический системный: нода type = "system" без ответов (см. Story1/Nodes/0003.json), текст от имени мессенджера.
Обыгранный финал: последнее сообщение/фото/видео от персонажа или стороннего человека, после которого нет вариантов ответа. Примеры:гневное видео от отца персонажа, который запрещает писать;
видео от прохожего: «Тут человек погиб, вы были последним контактом»;
короткое финальное сообщение от персонажа, затем системное «контакт удалён».

4. Медиа: фото и видео
Ты не можешь создавать реальные медиафайлы. Поэтому:
Если персонаж присылает фото:photo_description — максимально подробное, самодостаточное описание картинки:кто/что изображено (возраст, внешность, одежда, выражение лица);
место, время суток, освещение;
фон, предметы, детали, атмосфера;
взаимоотношение объектов на картинке.

Не писать коротко вроде «Ева смотрит на Зельду».
Нужно:
«Темнокожая девочка лет 12 с двумя толстами косичками, жёлтым бантом и в поношенном голубом худи стоит в пыльном сельском загоне, через низкий деревянный забор тянется руками к высокой белой в яблоках лошади с рыжей взъерошенной гривой, на заднем плане…» и т.д.
Описание должно быть настолько конкретным, чтобы несколько разных художников по нему нарисовали почти одно и то же изображение.

Проговорю еще раз типичные ошибки, которые встречаются в описательных промтах для видео и фото.
1. Использование имени персонажа. Имя персонажа НИЧЕГО не скажет художнику. Вместо имени нужно использовать описание персонажа.
2. Пропуск описания окружения. Например в контексте имеется в виду, что дом богато обставлен, или красные обои, или что-то еще важное, а в промте это не указано. В каждом промте нужно точно указывать окружение.
3. Излишне указана эмоциональность кадра. "Удручающая атмосфера", "Апогей одиночества" - это все плохо для промта, у нас везде реалистичные фото с телефона, и вместо "одиночества" нужно описывать окружение и контент на фото.
4. На фото присутствует наш персонаж, фотографирующий что-то. Так не может быть! Все фото делаются нашим персонажем! А значит он не может попасть в кадр, фотографирующим что-то. Максимум части его тела, или в фото в зеркале.
5. На фото присутствует телефон персонажа. А чем он тогда фотографирует? На фото не дожен присутствовать телефон персонажа.
6. На фото не должно быть откровенно неприятных вещей. Например руку в болячках от уколов наркомана - нельзя. Кровь, сломаные конечности, удары, расстрелы, эротика - нельзя.

photo_file должен присутствовать, но быть пустой строкой.
photo_message — короткий сопроводительный текст от персонажа.
photo_aspect - может принимать значения "vertical", "horizontal", "square"

Если персонаж присылает видео:video_description — максимально подробное, самодостаточное описание:кто/что и как снято (ракурс, движение камеры);
время суток, локация, атмосфера;
действия персонажей, их внешний вид, эмоции, мимика, жесты;
ключевые события на протяжении ролика.

Если есть речь, каждую реплику нужно прописать в video_subtitles как субтитры (для просмотра без звука).
video_file — пустая строка.
video_message — сопроводительный текст.
video_aspect - может принимать значения "vertical", "horizontal", "square"

Тексты, фото и видео должны встречаться примерно с одинаковой частотой по всей истории:Не допускай, чтобы история превратилась только в текст.
Если сложно органично вставить фото/видео — используй приём:«Пришли фотку того-то» / «покажи, что видишь»;
«Я не понимаю, какой провод резать, вот фото»;
«Снял видео, так проще показать».

5. Стиль диалогов и ответов
Очень важно: не пиши как профессиональный психолог.
Пиши как живой человек в чате, кратко и по-разному.
Сообщения персонажа:Недлинные: обычно 1–3 коротких строки (как реальные сообщения).
Без лекций и длинных монологов.  
Стиль речи должен соответствовать характеру персонажа (нервный подросток, усталый взрослый, грубый тип, паникёр, и т.п.).

Варианты ответов игрока:Короткие, «чатовые»:
типа «Лезь в окно», «Ты серьёзно?», «Это плохая идея», «Давай по фактам», а не длинные абзацы с анализом.
Минимум профессиональной терминологии и анализа, никаких длинных психологических разборов.
Обязательно широкий разброс по тону и морали:разумный/поддерживающий;
осторожный/тревожный;
агрессивный/саркастичный;
безответственный/глупый;
эгоистичный/манипулятивный;
иногда — холодный, циничный, или наоборот, чересчур альтруистичный.

Игрок должен почти всегда иметь выбор между реально разными стратегиями поведения, а не между тремя вежливыми терапевтическими перефразировками.

Избегай в ответах и репликах:сложных терминов, психотерапевтического жаргона;
излишне «правильных» и вылизанных формулировок;
чрезмерно длинных моральных наставлений.
Если игрок хочет «сделать фигню», в вариантах должен быть выбор, который ведёт к фигне.

Ответы игрока НЕ ДОЛЖНЫ БЫТЬ такими, как будто их пишет профессиональный психолог. Они должны быт простыми, как будто отвечает простой человек, такой же, как и сам персонаж. Не нужно в ответах писать лекции, умудренные слова, фразы, варианты ответов должны быть простыми, в жаргоне сюжета.

6. Разветвления и разнообразие
Не меньше 30–50 нод в основной ветке до канонического финала.
Общее количество нод: 300–500.
Для каждой ноды с ответами:Старайся, чтобы каждый вариант ответа:отличался по эмоциональному окрасу;
задавал разный вектор развития (осторожнее, рискованнее, жестче, мягче, циничнее, наивнее);
мог приводить к:другой ноде,
или к той же ноде, но только иногда и не слишком часто.

Избегай ситуации, когда у 30% нод все 2–3 ответа:одинаково поддерживающие/адекватные,
ведут в одну и ту же ноду,  
только слегка отличаются формулировкой.
Небольшой процент таких «ложных развилок» допустим, но не превращай это в норму.

В описании истории будет некоторое количество событий, который надо отобразить в истории. Когда герой проходит эти события - появляется шанс свернуть на другую ветку. Например - событие - персонаж идет на ограбление магазина - во время или после должны быть варианты перехода на разные ветки - например ограбить с жестокостью (путь Король улиц), ограбить аккуратно и свалить (лишь бы долг выплатить, ничего личного), не решиться на ограбление и искать работу (ЭТО ПРОСТО ПРИМЕР СМЕНЫ ВЕТОК, НЕ НАДО КОНКРЕТНО ЭТО ВСТАВЛЯТЬ)

Мне бы хотелось, чтобы каждая третья-четвертая нода была "долговременной". То есть персонаж и игрок обмениваются 1-3 фразами, чтобы принять какое-то решение, что делать дальше, а дальше мы как бы "проматываем время", и в след ноде узнаем, как прошло действие, авантюра, и встаем перед новым выбором. Чтобы было ощущение, что мы влияем не просто на минуту жизни персонажа, а реально влияем на его решения. Может пройти час, день, неделя после приняния того или иного решения, прежде чем персонаж снова напишет с описанием, что вышло и вопросами, что дальше.

7. Технические требования
Ноды должны иметь инкрементальные id (1, 2, 3, ..., N).
Id ответов — строго по шаблону:
a_<idНоды>_<номерОтвета> (номерОтвета — 1, 2, 3, …).
Формат JSON каждой ноды и StoryMeta.json — по аналогии с Projects/Story1.
Во всех медиа-сообщениях:photo_file и video_file должны присутствовать, но оставаться пустыми строками;
описания (photo_description, video_description) — максимально полные и независимые от внешнего контекста.

8. Порядок работы
Сначала внимательно изучи Projects/Story1, все файлы из Projects/Story1/Nodes (от 0001.json до 0006.json), файл Projects/Story1/StoryMeta.json, чтобы понять:формат JSON,
стиль чатов,
работу финальных нод и системных сообщений.

Затем, исходя из описанной мной ниже темы истории, мира, персонажа и желаемых концовок,:придумай название папки для истории и задай структуру Projects/НазваниеПапки;
создай StoryMeta.json;
сгенерируй все ноды (300–500 штук), соблюдая:инкрементальные id нод,
структуру сообщений и ответов,
требования к фото/видео,
стиль и разнообразие ответов.

Работай до тех пор, пока история:не будет полностью доделана,
не будет соответствовать указанным ограничениям по количеству нод и длине веток,
не будет иметь:один канонический хороший (или два: светлый/тёмный) финал,
несколько альтернативных успешных (в том числе злых) финалов,
множество серых/плохих/странных концовок. НЕ используй python и другие скрипты, создавай и редактируй файлы с помощью редактора.

Вот описание темы, на которую нужно создать историю:

